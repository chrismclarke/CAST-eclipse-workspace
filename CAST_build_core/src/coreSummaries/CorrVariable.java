package coreSummaries;import dataView.*;public class CorrVariable extends NumSummaryVariable {	private String xKey, yKey;	private int decimals;		static final public double correlation(NumVariable xVar, NumVariable yVar) {		int n = 0;		double sx = 0.0;		double sy = 0.0;		double sxx = 0.0;		double sxy = 0.0;		double syy = 0.0;				ValueEnumeration xe = xVar.values();		ValueEnumeration ye = yVar.values();		while (xe.hasMoreValues()) {			double x = xe.nextDouble();			double y = ye.nextDouble();			if (!Double.isNaN(x) && !Double.isNaN(y)) {				sx += x;				sy += y;				sxx += x * x;				sxy += x * y;				syy += y * y;				n ++;			}		}		return (sxy - sx * sy / n) / Math.sqrt((sxx - sx * sx / n) * (syy - sy * sy / n));	}		public CorrVariable(String theName, String xKey, String yKey, int decimals) {		super(theName);		this.xKey = xKey;		this.yKey = yKey;		this.decimals = decimals;	}		protected NumValue evaluateSummary(DataSet sourceData) {		NumVariable xVar = (NumVariable)sourceData.getVariable(xKey);		NumVariable yVar = (NumVariable)sourceData.getVariable(yKey);		return new NumValue(correlation(xVar, yVar), decimals);	}}