package simulation;import java.util.*;import dataView.*;public class EnvelopeVariable extends NumVariable {	private NumVariable zVar;	private Random generator = new Random();	private double noOfSDs;		public EnvelopeVariable(String theName, DataSet data, String zKey, double noOfSDs) {		super(theName);		zVar = (NumVariable)data.getVariable(zKey);		this.noOfSDs = noOfSDs;	}		public double getNoOfSDs() {		return noOfSDs;	}		public boolean lastValueRejected() {		if (noOfValues() <= 0)			return false;				double z = zVar.doubleValueAt(noOfValues() - 1);		double x = doubleValueAt(noOfValues() - 1);		return z >= Math.exp(-2.0 * noOfSDs * noOfSDs * (x - 0.5) * (x - 0.5));	}		public void generateNewValue(int decimals) {		double newX = generator.nextDouble();		double newZ = generator.nextDouble();		if (lastValueRejected()) {			NumValue xVal = (NumValue)valueAt(noOfValues() - 1);			xVal.setValue(newX);			NumValue zVal = (NumValue)zVar.valueAt(noOfValues() - 1);			zVal.setValue(newZ);		}		else {			addValue(new NumValue(newX, decimals));			zVar.addValue(new NumValue(newZ, decimals));		}	}}