package simulation;import dataView.*;public class PseudoRandCatVariable extends CatFunctionVariable {	private NumVariable rawVariable;	private String rawKey;	private double cumProb[];		public PseudoRandCatVariable(String theName, DataSet data, String rawKey,																				double[] prob) {		super(theName);		rawVariable = (NumVariable)data.getVariable(rawKey);		this.rawKey = rawKey;		setProbs(prob);	}		public void setProbs(double[] prob) {		if (cumProb == null || cumProb.length != prob.length - 1)			cumProb = new double[prob.length - 1];		double totalProb = 0.0;		for (int i=0 ; i<prob.length ; i++)			totalProb += prob[i];				double temp = 0.0;		for (int i=0 ; i<cumProb.length ; i++) {			temp += prob[i];			cumProb[i] = temp / totalProb;		}	}		public double[] getCumProbs() {		return cumProb;	}//--------------------------------------------------------		public int noOfValues() {		return rawVariable.noOfValues();	}		public Value valueAt(int index) {		double rand = rawVariable.doubleValueAt(index);//		System.out.println("Finding value at " + index + ": rand = " + rand);		for (int i=0 ; i<cumProb.length ; i++)			if (rand < cumProb[i])				return getLabel(i);				return getLabel(noOfCategories() - 1);	}		public boolean noteVariableChange(String key) {		return rawKey.equals(key);	}}