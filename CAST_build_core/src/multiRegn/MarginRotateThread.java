package multiRegn;import java.awt.*;import dataView.*;import models.*;import graphics3D.*;public class MarginRotateThread extends RotateThread {	static final private int kModelSteps = 50;		private MultipleRegnModel lsXZ;	private double[] constraints;	private CardLayout singleEqnLayout;	private XPanel singleEqnPanel;	private String displayVar;		public MarginRotateThread(Rotate3DView theView, double round2, double of2,											MultipleRegnModel lsXZ, double[] constraints,											CardLayout singleEqnLayout, XPanel singleEqnPanel, String displayVar) {		super(theView, round2, of2);		//	 round1 and of1 must be set with setInitialRotation()				this.lsXZ = lsXZ;		this.constraints = constraints;		this.singleEqnLayout = singleEqnLayout;		this.singleEqnPanel = singleEqnPanel;		this.displayVar = displayVar;	}		private void changeModelConstraints() throws InterruptedException {		int nParam = lsXZ.noOfParameters();		double oldParam[] = new double[nParam];		for (int i=0 ; i<nParam ; i++)			oldParam[i] = lsXZ.getParameter(i).toDouble();				lsXZ.updateLSParams("y", constraints);				double newParam[] = new double[nParam];		for (int i=0 ; i<nParam ; i++)			newParam[i] = lsXZ.getParameter(i).toDouble();				for (int step=1 ; step<=kModelSteps ; step++) {			for (int i=0 ; i<nParam ; i++)				lsXZ.setParameter(i, (oldParam[i] * (kModelSteps - step) + newParam[i] * step)																																					/ kModelSteps);			theView.repaint();			Thread.sleep(1000 / kStepsPerSecond);		}	}		public void run() {		try {			double tempRound2 = round2;			double tempOf2 = of2;			round2 = 45;			of2 = 30;						coreRotate();						changeModelConstraints();						round1 = 45;			of1 = 30;			round2 = tempRound2;			of2 = tempOf2;						coreRotate();		} catch (InterruptedException e) {		}		theView.repaint();		theView.clearRotateThread();					singleEqnLayout.show(singleEqnPanel, displayVar);	//	should be in middle of rotation but																											//	doesn't work right in AppletViewer	}}