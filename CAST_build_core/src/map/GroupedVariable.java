package map;import dataView.*;public class GroupedVariable extends CatFunctionVariable {	private NumVariable yVar;	private String yKey;	private NumValue boundary[];	private boolean hasNaN;		public GroupedVariable(String theName, DataSet data, String yKey, NumValue[] boundary, boolean hasNaN) {		super(theName);				Value labels[] = new Value[boundary.length + (hasNaN ? 2 : 1)];		labels[0] = new LabelValue("Under " + boundary[0].toString());				for (int i=1 ; i<boundary.length ; i++)			labels[i] = new LabelValue(boundary[i - 1].toString() + " to " + boundary[i].toString());				labels[boundary.length] = new LabelValue(boundary[boundary.length - 1].toString() + " and over");		if (hasNaN)			labels[boundary.length + 1] = new LabelValue("Unknown");				setLabels(labels);		yVar = (NumVariable)data.getVariable(yKey);		this.yKey = yKey;		this.boundary = boundary;		this.hasNaN = hasNaN;	}		public int noOfValues() {		return yVar.noOfValues();	}		public Value valueAt(int index) {		double y = yVar.doubleValueAt(index);		if (hasNaN && Double.isNaN(y))			return getLabel(boundary.length + 1);				int i;		for (i=0 ; i<boundary.length ; i++)			if (y < boundary[i].toDouble())				break;				return getLabel(i);	}		public boolean noteVariableChange(String key) {		return yKey.equals(key);	}}