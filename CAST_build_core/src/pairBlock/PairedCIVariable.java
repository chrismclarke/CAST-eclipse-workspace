package pairBlock;import dataView.*;import distn.*;import coreSummaries.*;public class PairedCIVariable extends IntervalSummaryVariable {	private NumVariable diffVar;	private CatVariable selectionVar;	private int decimals;	private double confLevel;		public PairedCIVariable(String theName, DataSet data, String diffKey,																			String selectionKey, double confLevel, int decimals) {		super(theName);		diffVar = (NumVariable)data.getVariable(diffKey);		selectionVar = (CatVariable)data.getVariable(selectionKey);		this.decimals = decimals;		this.confLevel = confLevel;	}		protected IntervalValue evaluateSummary(DataSet sourceData) {		int n = 0;		double sy = 0.0;		double syy = 0.0;				ValueEnumeration ye = diffVar.values();		ValueEnumeration ge = selectionVar.values();		while (ye.hasMoreValues() && ge.hasMoreValues()) {			double y = ye.nextDouble();			if (selectionVar.labelIndex(ge.nextValue()) == 0) {				n ++;				sy += y;				syy += y * y;			}		}				double mean = sy / n;				double var = (syy - sy * mean) / (n - 1);				double se = Math.sqrt(var / n);				int df = n - 1;		double tValue = -TTable.quantile(0.5 * (1.0 - confLevel), df);				return new IntervalValue(mean, se, tValue, decimals);	}}